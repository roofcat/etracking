{% extends 'base.html' %}

{% block title %}Búsqueda por Folio{% endblock %}

{% block content %}
<div class="row">
	<nav class="col-xs-5 col-sm-4 col-md-3 col-lg-3 menu">
		<ul>
			<legend style="padding-left:20px;">Menú Estadísticas</legend>
			<form method="POST">
				<li>
					<div class="form-group has-feedback">
						<label class="control-label">Nº de Folio a buscar</label>
						<input class="form-control" type="text" name="folio" id="folio" required>
						<span class="glyphicon glyphicon-briefcase form-control-feedback" aria-hidden="true"></span>
					</div>
				</li>
				<li>
					<div class="form-group" align="right" style="margin-right:20px;">
						<button id="run_search" type="submit" class="btn btn-material-red btn-fab btn-raised mdi-navigation-arrow-forward" data-toggle="modal" data-target="#loadingModal" title="Buscar">
						<div class="ripple-wrapper"></div>
						</button>
					</div>
				</li>
			</form>
		</ul>
	</nav>

	<div class="pages col-xs-7 col-sm-8 col-md-9 col-lg-9">
		<div class="col-xs-10">
			{% if correos %}
				{% for correo in correos %}
				<div class="well">
					<div class="panel panel-success">
						<div class="panel-heading">
							<strong>Folio Nº:</strong> {{ correo.numero_folio }}
							<strong> Correo:</strong> {{ correo.correo }}
							<strong> Fecha:</strong> {{ correo.input_date }}
						</div>
						<div class="panel-body" style="font-size:12px;">
							<strong>Rut receptor: </strong>{{ correo.rut_receptor }} - <strong>Cliente: </strong> {{ correo.nombre_cliente }} <br>
						    <strong>Rut emisor: </strong>{{ correo.rut_emisor }} - <strong>Emisor: </strong> {{ correo.empresa }} <br>
						    <strong>Tipo envío: </strong>{{ correo.tipo_envio }}
						    <strong>Tipo dte: </strong>{{ correo.tipo_dte }}
						    <strong>Resolución receptor: </strong> {% if correo.resolucion_receptor %} {{ correo.resolucion_receptor }} {% else %} {% endif %}
						    <strong>Resolución emisor: </strong>{{ correo.resolucion_emisor }}
						    <strong>Monto: </strong>{{ correo.monto }}
						    <strong>Fecha emisión: </strong>{{ correo.fecha_emision }}
						    <strong>Fecha recepción: </strong>{{ correo.fecha_recepcion }}
						    <strong>Estado documento: </strong>{{ correo.estado_documento }}
						    <strong>Tipo operación: </strong>{{ correo.tipo_operacion }}
						    <strong>Tipo receptor: </strong>{{ correo.tipo_receptor }}
							<br>
							<strong>Estados del correo</strong><br>
							{% if correo.processed_event %}
							<span class="label label-default">
	    						{{ correo.processed_event }} - {{ correo.processed_date }}
							</span><br>
    						{% endif %}
    						{% if correo.delivered_event %}
    						<span class="label label-primary">
	    						{{ correo.delivered_event }} - {{ correo.delivered_date }}
    						</span><br>
    						{% endif %}
    						{% if correo.opened_event %}
    						<span class="label label-success">
						    	{{ correo.opened_event }} - {{ correo.opened_first_date }} - {{ correo.opened_ip }} -
						    {{ correo.opened_user_agent }} - <strong>Veces visto </strong> {{ correo.opened_count }}
    						</span><br>
    						{% endif %}
    						{% if correo.dropped_event %}
    						<span class="label label-warning">
    							{{ correo.dropped_event }} - {{ correo.dropped_reason }} - {{ correo.dropped_date }}
    						</span><br>
    						{% endif %}
    						
    						{% if correo.bounce_event %}
    						<span class="label label-danger">
    							{{ correo.bounce_event }} - {{ correo.bounce_date }} - {{ correo.bounce_type }} - {{ correo.bounce_status }}
    						</span><br>
    						<p class="alert alert-danger">{{ correo.bounce_reason }}</p><br>
    						{% endif %}

    						{% if correo.unsubscribe_event %}
    						<span class="label label-info">
						    	{{ correo.unsubscribe_event }} - {{ correo.unsubscribe_date }}
    						</span><br>
    						{% endif %}
						</div>
					</div>
				</div>
				{% endfor %}
			{% else %}
				<div class="alert alert-dismissable alert-info">
				    <button type="button" class="close" data-dismiss="alert">×</button>
				    <strong>No hay datos.</strong> Puedes buscar el folio que desees.
				</div>
			{% endif %}
		</div>
	</div>
</div>
<!--
<div class="modal" id="loadingModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" id="modalButton" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Cargando...</h4>
            </div>
            <div class="modal-body">
                <p>por favor espere unos segundos</p>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
-->
{% endblock %}